<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru">
<head>
    <title>Карта Генплан api v1</title>
    <script src="http://api-maps.yandex.ru/1.1/index.xml?key=AEx4w1MBAAAATeb5ZQIAdkGU-mr10GEBusr3v9hz3Fj30ysAAAAAAAAAAACEmAP813k5-WNWiVkmjKElKC0r3g==" type="text/javascript"></script>
    <script type="text/javascript">
        window.onload = function () {
            var options = {
                    tileUrlTemplate: "./%z/tile-%x-%y.png",
                    controls: {
                        typeControl: true,
                        miniMap: false,
                        toolBar: true,
                        scaleLine: false
                    },
                    scrollZoomEnabled: true,
                    mapCenter: new YMaps.GeoPoint(39.053722865736, 51.7455485845738),
                    backgroundMapType: YMaps.MapType.NONE,
                    mapZoom: 17,
                    isTransparent: true,
                    smoothZooming: false,
                    layerKey: "my#layer",
                    mapType: {
                        name: "Генплан",
                        textColor: "#000000"
                    },
                    copyright: "",
					layerMinZoom: 16,
					layerMaxZoom: 20
                },
                map = new YMaps.Map(document.getElementById("YMapsID")/*, {
				coordSystem: new YMaps.CartesianCoordSystem(
					new YMaps.Point(-1, -1), // Координаты левого нижнего угла карты
					new YMaps.Point(1, 1), // Координаты правого верхнего угла карты
					111100,
					4 // Длина единичного отрезка в метрах
				)}*/),
                myData = new YMaps.TileDataSource(options.tileUrlTemplate, options.isTransparent, options.smoothZooming);
				

            myData.getTileUrl = function (tile, zoom) {
                return this.getTileUrlTemplate().replace(/%x/i, tile.x).replace(/%y/i, tile.y).replace(/%z/i, zoom);
            }

            var MyLayer = function () {
                return new YMaps.Layer(myData);
            }
            YMaps.Layers.add(options.layerKey, MyLayer);

            var mapLayers = options.backgroundMapType ? options.backgroundMapType.getLayers() : [],
                myMapType = new YMaps.MapType(YMaps.jQuery.merge(mapLayers, [ options.layerKey ]), options.mapType.name, { textColor: options.mapType.textColor });

            map.setCenter(options.mapCenter, options.mapZoom, myMapType);
            if (options.copyright) {
                map.addCopyright(options.copyright);
            }

            if (options.controls.typeControl) {
                map.addControl(new YMaps.TypeControl([ myMapType, YMaps.MapType.MAP, YMaps.MapType.SATELLITE, YMaps.MapType.HYBRID ], [1, 2, 3]));
            }
         
            if (options.controls.miniMap) {
                map.addControl(new YMaps.MiniMap());
            }
            if (options.controls.toolBar) {
                map.addControl(new YMaps.ToolBar());
            }
            if (options.controls.scaleLine) {
                map.addControl(new YMaps.ScaleLine());
            }
            if (options.scrollZoomEnabled) {
                map.enableScrollZoom();
            }
            map.addControl(new YMaps.Zoom());
        }
    </script>
    <style type="text/css">
        #YMapsID {
            width: 800px;
            height: 600px;
        }
    </style>
</head>
<body>
    <div id="YMapsID"></div>
</body>
</html>
